# OutBook 要件定義書

## 1. プロジェクト概要

### 1.1 目的
エンジニア向けに読んだ技術書のアウトプットを行う場所を提供すること。
各エンジニアのレベルに合った技術書を見つけやすくするプラットフォームを構築する。

### 1.2 背景・解決したい課題
- 読んだ技術書の内容を、公開・非公開に分けてアウトプットできる場所がない
- 内容は非公開にしたいが、何を読み終えたのかは他のユーザーに共有したい
- スクールやアフィリエイトが紹介する本が、自身のレベルに合わず挫折する経験を減らし、購入者のレベルにマッチした本を見つけたい
- 購入した本と合わせて読みたい本を、順位立てて紹介したい
- プログラミング言語、レベル（ジュニア・ミドル・シニア）、経験年数、職域（ネットワーク・クラウド・フロント・バックエンド）などを組み合わせて本を検索したい
- 著者・出版日・書評の高さ・おすすめ度などでも絞り込み検索できるようにしたい
- 技術書のランキングを表示したい

### 1.3 ターゲットユーザー
- 未経験エンジニア
- ジュニアエンジニア
- ミドル・シニアエンジニア
- 技術書を通じてスキルアップを目指すすべてのエンジニア

### 1.4 成功指標（KPI）
- ユーザー登録数
- 月間アクティブユーザー数（MAU）
- 投稿されたアウトプット数
- 書評投稿数
- 検索利用回数

## 2. プロジェクトスコープ

### 2.1 実装範囲
- ユーザー登録・ログイン機能
- 技術書のアウトプット投稿（公開/非公開設定）
- 技術書の検索機能（言語・レベル・職域での絞り込み + 複合条件検索）
- 書評投稿機能
- ランキング表示

### 2.2 将来実装機能
- AIによるアウトプットのレビュー・フィードバック
- ユーザー設定内容とのマッチ度計算
- おすすめ本の順位付け機能
- ソーシャル機能（いいね、コメント、フォロー）

## 3. 機能要件

### 3.1 ユーザー管理機能

#### 3.1.1 ユーザー登録・認証
- **認証方式**: メールアドレス + パスワード認証
- **将来対応**: GitHub OAuth、Google OAuth
- **必須情報**:
  - メールアドレス
  - パスワード（8文字以上、英数字記号混在）
  - ニックネーム
- **任意情報**:
  - プロフィール画像
  - 自己紹介
  - スキルレベル（ジュニア/ミドル/シニア）
  - 経験年数
  - 専門分野（フロント/バックエンド/インフラ/ネットワーク等）
  - 得意な言語

#### 3.1.2 プロフィール管理
- プロフィール情報の編集
- パスワード変更
- アカウント削除（論理削除）

### 3.2 アウトプット機能

#### 3.2.1 アウトプット投稿
- **投稿内容**:
  - タイトル（必須、最大100文字）
  - 本の情報（書籍名、著者、ISBN）
  - アウトプット本文（Markdown対応）
  - 読了日
  - タグ（最大5個）
- **公開設定**:
  - 完全公開：全ユーザーが閲覧可能
  - タイトルのみ公開：本のタイトルと読了日のみ公開、本文は非公開
  - 完全非公開：自分のみ閲覧可能

#### 3.2.2 アウトプット閲覧・管理
- 自分の投稿一覧表示
- 他ユーザーの公開アウトプット閲覧
- 投稿の編集・削除
- 下書き保存機能

#### 3.2.3 AIレビュー機能（将来実装）
- ユーザーが自身のAPIキーを設定
- 対応AI: OpenAI API、Anthropic Claude API
- アウトプット内容に対するフィードバック生成
- レビュー履歴の保存

### 3.3 本索引・検索機能

#### 3.3.1 本のデータベース
- 書籍情報の登録（手動入力、ISBN検索による自動取得）
- **登録情報**:
  - 書籍名
  - 著者
  - 出版社
  - 出版日
  - ISBN
  - カバー画像URL
  - 概要

#### 3.3.2 検索機能
- **基本検索（MVP）**:
  - フリーワード検索（書籍名、著者名）
  - プログラミング言語での絞り込み
  - レベル（初級/中級/上級）での絞り込み
  - 職域での絞り込み
- **高度な検索（将来実装）**:
  - 複合条件検索（AND/OR条件）
  - 出版日範囲指定
  - 書評スコア順ソート
  - おすすめ度順ソート

#### 3.3.3 ランキング機能
- 全体ランキング（週間/月間/年間）
- カテゴリ別ランキング（言語別、レベル別、職域別）
- ランキング算出基準：
  - アウトプット投稿数
  - 書評数
  - 平均評価スコア

### 3.4 書評機能

#### 3.4.1 書評投稿
- **投稿内容**:
  - 評価スコア（1〜5の星評価）
  - 書評本文（最大1000文字）
  - おすすめレベル（初級/中級/上級から複数選択可）
  - おすすめ職域（複数選択可）
- **投稿制限**:
  - 1冊につき1ユーザー1回のみ投稿可能
  - 投稿後の編集は可能

#### 3.4.2 書評閲覧
- 各書籍の書評一覧表示
- 評価スコア順・新着順でソート
- 書評の役立ち度評価（いいねボタン）

#### 3.4.3 モデレーション機能
- **不適切な書評の通報機能**:
  - 通報理由の選択（スパム、誹謗中傷、不適切な内容など）
  - 通報された書評は管理者レビュー待ちとなる
- **管理者による対応**:
  - 書評の非表示化
  - ユーザーへの警告
  - 悪質な場合はアカウント停止
- **書評投稿ガイドライン**:
  - 客観的で建設的な評価を推奨
  - 個人攻撃や誹謗中傷の禁止
  - 内容に関係のない宣伝行為の禁止

### 3.5 システム設定

#### 3.5.1 ユーザー設定
- プロフィール情報の編集
- 通知設定（メール通知のON/OFF）
- APIキー設定（AIレビュー用）
- プライバシー設定

#### 3.5.2 検索設定
- デフォルト検索条件の保存
- よく使う検索条件のブックマーク

## 4. 非機能要件

### 4.1 パフォーマンス
- ページ読み込み時間：3秒以内
- 検索結果表示：2秒以内
- API応答時間：1秒以内（95パーセンタイル）
- 同時接続数：初期は100ユーザー、将来的に1,000ユーザーまでスケール可能

### 4.2 セキュリティ
- パスワードのハッシュ化（bcrypt使用）
- HTTPS通信の強制
- XSS、CSRF対策の実装
- SQLインジェクション対策（プリペアドステートメント使用）
- APIレート制限の実装
- ユーザーのAPIキーは暗号化して保存

### 4.3 可用性
- 稼働率：99%以上を目標
- データバックアップ：日次で自動バックアップ
- 障害時の復旧時間：24時間以内

### 4.4 保守性
- コードの静的解析ツールの導入
- ユニットテストカバレッジ：70%以上
- ドキュメントの整備（README、API仕様書）

### 4.5 ユーザビリティ
- レスポンシブデザイン（スマートフォン、タブレット、PC対応）
- アクセシビリティ対応（WCAG 2.1 レベルA準拠を目標）

## 5. データ設計

### 5.1 主要エンティティ

#### Users（ユーザー）
- id, email, password_hash, nickname, avatar_url
- skill_level, years_of_experience, specialties
- created_at, updated_at

#### Books（書籍）
- id, title, author, publisher, published_date, isbn
- cover_image_url, description
- created_at, updated_at

#### Outputs（アウトプット）
- id, user_id, book_id, title, content
- visibility（public/title_only/private）
- reading_finished_date, tags
- created_at, updated_at

#### Reviews（書評）
- id, user_id, book_id, rating, content
- recommended_levels, recommended_specialties
- created_at, updated_at

#### Reports（通報）
- id, review_id, reporter_user_id, reason, status
- created_at, resolved_at

### 5.2 リレーション
- Users 1 : N Outputs
- Users 1 : N Reviews
- Books 1 : N Outputs
- Books 1 : N Reviews
- Reviews 1 : N Reports

## 6. 技術要件

### 6.1 技術スタック

#### バックエンド
- **言語**: Go 1.21+
- **フレームワーク**: Echo または Gin
- **選定理由**: 高パフォーマンス、シンプルな構文、並行処理の容易さ

#### フロントエンド
- **フレームワーク**: Next.js 14+ (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **選定理由**: SSR/SSG対応、SEO最適化、開発体験の良さ

#### データベース
- **本番**: Turso（SQLite互換のエッジDB）
- **選定理由**: 低コスト、低レイテンシ、スケーラビリティ
- **ORM**: GORM（Go）

#### インフラ・デプロイ
- **開発環境**: Docker Compose、Localstack（AWS環境のローカルエミュレーション）
- **本番環境**: 
  - フロントエンド: Vercel
  - バックエンド: AWS（または将来的にクラウド移行を検討）
- **CI/CD**: GitHub Actions
  - 自動テスト実行
  - 自動デプロイ（main/developブランチへのマージ時）

### 6.2 外部API・サービス
- OpenBD API または Google Books API（書籍情報取得）
- OpenAI API / Anthropic Claude API（AIレビュー機能、ユーザーのAPIキー使用）

## 9. 開発マイルストーン（目安）

### Phase 1: MVP開発（1〜2ヶ月）
- ユーザー登録・認証機能
- アウトプット投稿機能（基本）
- 書籍検索機能（基本）
- 書評機能（基本）

### Phase 2: 機能拡充（2〜3ヶ月）
- 高度な検索機能
- ランキング機能
- モデレーション機能
- UI/UX改善

### Phase 3: 追加機能（3〜6ヶ月）
- AIレビュー機能
- ソーシャル機能
- モバイルアプリ化検討

## 10. 参考資料・補足

### 10.1 参考サービス
- 読書メーター（読書記録）
- Goodreads（書評プラットフォーム）
- Zenn、Qiita（技術記事プラットフォーム）

### 10.2 用語集
- **MVP**: Minimum Viable Product（実用最小限の製品）
- **MAU**: Monthly Active Users（月間アクティブユーザー）
- **SSR/SSG**: Server-Side Rendering / Static Site Generation
